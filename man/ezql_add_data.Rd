% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sql.R
\name{ezql_add_data}
\alias{ezql_add_data}
\title{Add Data to a SQL Table with Data Type Handling}
\usage{
ezql_add_data(
  df,
  table,
  breakdown = NULL,
  schema = NULL,
  database = NULL,
  address = NULL,
  rosetta = NULL,
  names_column_sql = "sql",
  type_function_column = "r_type"
)
}
\arguments{
\item{df}{A data frame containing the data to add.}

\item{table}{A string specifying the name of the target SQL table.}

\item{breakdown}{A tibble returned by \code{ezql_check_table()} with pre-validated data.
Defaults to \code{NULL}, and validation is performed within the function.}

\item{schema}{A string specifying the schema of the table. Defaults to the value
retrieved from \code{ezql_details_schema()}.}

\item{database}{A string specifying the database name. Defaults to the value
retrieved from \code{ezql_details_db()}.}

\item{address}{A string specifying the server address. Defaults to the value
retrieved from \code{ezql_details_add()}.}

\item{rosetta}{A data frame (or tibble) used for column-level data type transformations.
This should contain at least two columns: one for column names and one for the associated type transformation functions.
Defaults to \code{NULL}, meaning no transformations will be applied.}

\item{names_column_sql}{A string specifying the column in the \code{rosetta} data frame
that contains the names of the columns in the SQL table. Defaults to \code{"sql"}.}

\item{type_function_column}{A string specifying the column in the \code{rosetta} data frame
that contains the type transformation functions for the corresponding columns. Defaults to \code{"r_type"}.}
}
\value{
No return value. This function is called for its side effects of adding
data to the specified SQL table. If no rows are added, a message is printed.
}
\description{
Appends data from a data frame to a specified table in a SQL database, with optional data type transformations based on a "rosetta" data frame.
Ensures that the column names in the data frame match those in the table and applies type conversions if specified.
}
\details{
If \code{breakdown} is provided, the function assumes that the data frame has
already been validated. Otherwise, it runs \code{ezql_check_table()} to validate
the input. If \code{rosetta} is provided, it applies the specified type transformations
to the columns in the data frame before adding the data to the SQL table. Columns
not listed in the \code{rosetta} will remain unchanged.

The \code{rosetta} data frame must have one column (specified by \code{names_column_sql})
listing the column names in the SQL table, and another column
(specified by \code{type_function_column}) containing the names of functions
to be applied for the transformations.
}
\examples{
\dontrun{
# Add rows to a table without transformations
ezql_add_data(
  df = my_data,
  table = "my_table",
  schema = "dbo",
  database = "my_database",
  address = "my_server"
)

# Add rows with type transformations using a rosetta data frame
rosetta <- tibble::tibble(
  sql = c("column1", "column2"),
  r_type = c("as.character", "as.numeric")
)

ezql_add_data(
  df = my_data,
  table = "my_table",
  schema = "dbo",
  database = "my_database",
  address = "my_server",
  rosetta = rosetta
)
}

}
\seealso{
\code{\link{ezql_check_table}}
}
