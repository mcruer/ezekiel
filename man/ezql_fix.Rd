% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sql.R
\name{ezql_fix}
\alias{ezql_fix}
\title{Apply a Targeted Data Fix and Log the Change}
\usage{
ezql_fix(
  df,
  table,
  update_note,
  user,
  file_paths = NULL,
  rosetta = ezql_rosetta(),
  schema = NULL,
  database = NULL,
  address = NULL
)
}
\arguments{
\item{df}{A one-row tibble containing the corrected data (R-side column names).}

\item{table}{The target SQL table name.}

\item{update_note}{A text note describing the reason or context for the fix.}

\item{user}{The name or identifier of the individual performing the fix.
Recorded in the central \code{fix_log.txt} for traceability.}

\item{file_paths}{Optional character vector of file or folder paths to include in the log.
Defaults to \code{NULL}. Missing files trigger an error.}

\item{rosetta}{A rosetta mapping tibble linking R and SQL column names.
Defaults to \code{ezql_rosetta()}.}

\item{schema, database, address}{Optional SQL connection details;
defaults to values from \code{ezql_details_*()}.}
}
\value{
Invisibly returns the result of the \code{ezql_edit()} operation.
}
\description{
This function performs a controlled update of a single record in a SQL table.
It:
- Retrieves the existing record from the server
- Logs the old and new values, supporting files, user identity, and update note locally
- Applies the corrected record via \code{ezql_edit()}
}
\details{
Each fix is stored in its own timestamped subfolder under
\code{file.path(ezql_log_path(), table)}, along with a central
\code{fix_log.txt} that records the user, timestamp, key, and note for each change.


Primary key values are converted to character type using \code{gplyr::to_character()}
before being concatenated into a single audit key string. This ensures consistent
behavior across numeric and character PK types when building folder names and log entries.
}
